#!/usr/bin/env mksh
#
#
THE_ARGS="$@"
THIS_DIR="$(mksh_setup dirname_of_bin "$0")"

if [[ -z "$@" ]]; then
  action="watch"
else
  action=$1
  shift
fi

set -u -e -o pipefail

case $action in
  help|--help)
    mksh_setup print-help $0
    ;;

  *)

    func_file="$THIS_DIR/bin/lib/${action}.sh"

    if [[ ! -s "$func_file" ]]; then # === It's an error:
      echo "!!! Unknown action: $action" 1>&2
      exit 1
    fi

    source "$func_file"
    "$action" "$@"
    ;;

esac
